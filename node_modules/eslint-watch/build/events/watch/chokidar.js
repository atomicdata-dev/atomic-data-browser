"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _chokidar = _interopRequireDefault(require("chokidar"));

var _logger = require("../../logger");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const logger = (0, _logger.createLogger)('watch:chokidar');
const ignoredPath = /\.git|node_modules|bower_components|\.eslintcache/;
var _default = {
  createWatcher(dirs, options = {}) {
    logger.debug('Watching %o %o', dirs, options);
    const ignored = options.ignored ? new RegExp(`${ignoredPath.source}|${options.ignored.source}`) : ignoredPath;

    const watcher = _chokidar.default.watch(dirs, {
      ignored
    });

    return {
      on: watcher.on.bind(watcher),
      add: watcher.add.bind(watcher),
      unwatch: watcher.unwatch.bind(watcher),
      close: watcher.close
    };
  }

};
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9ldmVudHMvd2F0Y2gvY2hva2lkYXIuanMiXSwibmFtZXMiOlsibG9nZ2VyIiwiaWdub3JlZFBhdGgiLCJjcmVhdGVXYXRjaGVyIiwiZGlycyIsIm9wdGlvbnMiLCJkZWJ1ZyIsImlnbm9yZWQiLCJSZWdFeHAiLCJzb3VyY2UiLCJ3YXRjaGVyIiwiY2hva2lkYXIiLCJ3YXRjaCIsIm9uIiwiYmluZCIsImFkZCIsInVud2F0Y2giLCJjbG9zZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLDBCQUFhLGdCQUFiLENBQWY7QUFFQSxNQUFNQyxXQUFXLEdBQUcsbURBQXBCO2VBRWU7QUFDYkMsRUFBQUEsYUFBYSxDQUFDQyxJQUFELEVBQU9DLE9BQU8sR0FBRyxFQUFqQixFQUFxQjtBQUNoQ0osSUFBQUEsTUFBTSxDQUFDSyxLQUFQLENBQWEsZ0JBQWIsRUFBK0JGLElBQS9CLEVBQXFDQyxPQUFyQztBQUNBLFVBQU1FLE9BQU8sR0FBR0YsT0FBTyxDQUFDRSxPQUFSLEdBQWtCLElBQUlDLE1BQUosQ0FBWSxHQUFFTixXQUFXLENBQUNPLE1BQU8sSUFBR0osT0FBTyxDQUFDRSxPQUFSLENBQWdCRSxNQUFPLEVBQTNELENBQWxCLEdBQWtGUCxXQUFsRzs7QUFDQSxVQUFNUSxPQUFPLEdBQUdDLGtCQUFTQyxLQUFULENBQWVSLElBQWYsRUFBcUI7QUFBRUcsTUFBQUE7QUFBRixLQUFyQixDQUFoQjs7QUFFQSxXQUFPO0FBQ0xNLE1BQUFBLEVBQUUsRUFBRUgsT0FBTyxDQUFDRyxFQUFSLENBQVdDLElBQVgsQ0FBZ0JKLE9BQWhCLENBREM7QUFFTEssTUFBQUEsR0FBRyxFQUFFTCxPQUFPLENBQUNLLEdBQVIsQ0FBWUQsSUFBWixDQUFpQkosT0FBakIsQ0FGQTtBQUdMTSxNQUFBQSxPQUFPLEVBQUVOLE9BQU8sQ0FBQ00sT0FBUixDQUFnQkYsSUFBaEIsQ0FBcUJKLE9BQXJCLENBSEo7QUFJTE8sTUFBQUEsS0FBSyxFQUFFUCxPQUFPLENBQUNPO0FBSlYsS0FBUDtBQU1EOztBQVpZLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2hva2lkYXIgZnJvbSAnY2hva2lkYXInO1xuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnLi4vLi4vbG9nZ2VyJztcblxuY29uc3QgbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKCd3YXRjaDpjaG9raWRhcicpO1xuXG5jb25zdCBpZ25vcmVkUGF0aCA9IC9cXC5naXR8bm9kZV9tb2R1bGVzfGJvd2VyX2NvbXBvbmVudHN8XFwuZXNsaW50Y2FjaGUvO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGNyZWF0ZVdhdGNoZXIoZGlycywgb3B0aW9ucyA9IHt9KSB7XG4gICAgbG9nZ2VyLmRlYnVnKCdXYXRjaGluZyAlbyAlbycsIGRpcnMsIG9wdGlvbnMpO1xuICAgIGNvbnN0IGlnbm9yZWQgPSBvcHRpb25zLmlnbm9yZWQgPyBuZXcgUmVnRXhwKGAke2lnbm9yZWRQYXRoLnNvdXJjZX18JHtvcHRpb25zLmlnbm9yZWQuc291cmNlfWApIDogaWdub3JlZFBhdGg7XG4gICAgY29uc3Qgd2F0Y2hlciA9IGNob2tpZGFyLndhdGNoKGRpcnMsIHsgaWdub3JlZCB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBvbjogd2F0Y2hlci5vbi5iaW5kKHdhdGNoZXIpLFxuICAgICAgYWRkOiB3YXRjaGVyLmFkZC5iaW5kKHdhdGNoZXIpLFxuICAgICAgdW53YXRjaDogd2F0Y2hlci51bndhdGNoLmJpbmQod2F0Y2hlciksXG4gICAgICBjbG9zZTogd2F0Y2hlci5jbG9zZSxcbiAgICB9O1xuICB9LFxufTtcbiJdfQ==